[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Stata commands for random effects adjustment: the reffadjust package",
    "section": "",
    "text": "The reffadjust package provides postestimation commands to perform adjustment of random effects estimates.\nThe reffadjust commands are:\n\nreffadjustsim: simulating from the distribution of random effect variances and covariances\nreffadjust4nlcom: regression coefficient formula to pass to nlcom.\n\nSince multilevel models including random effects, such as those implemented in MLwiN and mixed/xtmixed, return estimates of the variances and covariances of the random effects and the corresponding variances and covariances of these estimates we can use these to estimate adjusted coefficients.\nThe approach is described in more detail in Macdonald-Wallis et al. (2012) and Palmer et al. (2014).\n\n\nTo install, issue in Stata (in versions 13 and above) using the github package, first install the github package:\nnet install github, from(\"https://haghish.github.io/github/\")\nthen run\ngithub install remlapmot/reffadjust\nAlternatively use net install directly as follows\nnet install reffadjust, from(\"https://raw.github.com/remlapmot/reffadjust/master/\")\n\n\nThis is available from https://www.bristol.ac.uk/cmm/software/mlwin/.\nThe MLwiN libraries are now available natively for macOS (both Intel and Apple Silicon Macs) and a range of Linux ditributions.\nOn macOS the mlnscript and libmln.dylib files must be granted permission to run in System Settings | Privacy and Security | Scroll down to Security section. See my blogpost for more details.\n\n\n\n\nEither, in Stata change directory to the cscripts directory and run\ndo master\nor from a terminal session run the test recipe in the justfile\njust test\n\n\n\nThanks to Gemma Clayton for discovering that reffadjustsim had stopped working under a recent version of Stata. And thanks to Stata Corp. for providing me with a fix for this issue.\n\n\n\n\n2025-10-20 Tested under MLwiN 3.16 and StataNow 19.5 on macOS M4 chip\n2025-10-17 reffadjust now has a website https://remlapmot.github.io/reffadjust/\n2025-10-12 Tested under MLwiN 3.15 and StataNow 19.5 on macOS M4 chip\n2025-09-26 Tested under MLwiN 3.14 and StataNow 19.5 on macOS M4 chip\n2025-06-06 Tested under MLwiN 3.14 and StataNow 18.5 on macOS M4 chip\n2025-04-05 Tested under MLwiN 3.13 and StataNow 18.5 on macOS M4 chip\n2025-03-20 Tested under MLwiN 3.13 and StataNow 18.5 on macOS and Windows 11\n2024-10-12 Tested under MLwiN 3.13 and StataNow 18.5\n2024-08-12 Tested under MLwiN 3.12 and StataNow 18.5\n2024-06-15 Tested under MLwiN 3.11 and StataNow 18.5\n2024-03-19 Tested under MLwiN 3.10 and Stata 18.0\n2024-01-30 Tested under MLwiN 3.09 (and Stata 18)\n2024-01-29 Tested on Stata 18 and macOS\n\n\n\n\n\nMacdonald-Wallis C, Lawlor DA, Palmer TM, Tilling K. Multivariate multilevel spline models for parallel growth processes: application to weight and mean arterial pressure in pregnancy. Statistics in Medicine, 2012, 31, 26, 3147–3164. https://doi.org/10.1002/sim.5385\nPalmer TM, Macdonald-Wallis CM, Lawlor DA, Tilling K. Estimating adjusted associations between random effects from multilevel models: the reffadjust package. Stata Journal, 2014, 14, 1, 119–140. https://www.stata-journal.com/article.html?article=st0327"
  },
  {
    "objectID": "index.html#installation",
    "href": "index.html#installation",
    "title": "Stata commands for random effects adjustment: the reffadjust package",
    "section": "",
    "text": "To install, issue in Stata (in versions 13 and above) using the github package, first install the github package:\nnet install github, from(\"https://haghish.github.io/github/\")\nthen run\ngithub install remlapmot/reffadjust\nAlternatively use net install directly as follows\nnet install reffadjust, from(\"https://raw.github.com/remlapmot/reffadjust/master/\")\n\n\nThis is available from https://www.bristol.ac.uk/cmm/software/mlwin/.\nThe MLwiN libraries are now available natively for macOS (both Intel and Apple Silicon Macs) and a range of Linux ditributions.\nOn macOS the mlnscript and libmln.dylib files must be granted permission to run in System Settings | Privacy and Security | Scroll down to Security section. See my blogpost for more details."
  },
  {
    "objectID": "index.html#running-tests",
    "href": "index.html#running-tests",
    "title": "Stata commands for random effects adjustment: the reffadjust package",
    "section": "",
    "text": "Either, in Stata change directory to the cscripts directory and run\ndo master\nor from a terminal session run the test recipe in the justfile\njust test"
  },
  {
    "objectID": "index.html#acknowledgements",
    "href": "index.html#acknowledgements",
    "title": "Stata commands for random effects adjustment: the reffadjust package",
    "section": "",
    "text": "Thanks to Gemma Clayton for discovering that reffadjustsim had stopped working under a recent version of Stata. And thanks to Stata Corp. for providing me with a fix for this issue."
  },
  {
    "objectID": "index.html#notes",
    "href": "index.html#notes",
    "title": "Stata commands for random effects adjustment: the reffadjust package",
    "section": "",
    "text": "2025-10-20 Tested under MLwiN 3.16 and StataNow 19.5 on macOS M4 chip\n2025-10-17 reffadjust now has a website https://remlapmot.github.io/reffadjust/\n2025-10-12 Tested under MLwiN 3.15 and StataNow 19.5 on macOS M4 chip\n2025-09-26 Tested under MLwiN 3.14 and StataNow 19.5 on macOS M4 chip\n2025-06-06 Tested under MLwiN 3.14 and StataNow 18.5 on macOS M4 chip\n2025-04-05 Tested under MLwiN 3.13 and StataNow 18.5 on macOS M4 chip\n2025-03-20 Tested under MLwiN 3.13 and StataNow 18.5 on macOS and Windows 11\n2024-10-12 Tested under MLwiN 3.13 and StataNow 18.5\n2024-08-12 Tested under MLwiN 3.12 and StataNow 18.5\n2024-06-15 Tested under MLwiN 3.11 and StataNow 18.5\n2024-03-19 Tested under MLwiN 3.10 and Stata 18.0\n2024-01-30 Tested under MLwiN 3.09 (and Stata 18)\n2024-01-29 Tested on Stata 18 and macOS"
  },
  {
    "objectID": "index.html#references",
    "href": "index.html#references",
    "title": "Stata commands for random effects adjustment: the reffadjust package",
    "section": "",
    "text": "Macdonald-Wallis C, Lawlor DA, Palmer TM, Tilling K. Multivariate multilevel spline models for parallel growth processes: application to weight and mean arterial pressure in pregnancy. Statistics in Medicine, 2012, 31, 26, 3147–3164. https://doi.org/10.1002/sim.5385\nPalmer TM, Macdonald-Wallis CM, Lawlor DA, Tilling K. Estimating adjusted associations between random effects from multilevel models: the reffadjust package. Stata Journal, 2014, 14, 1, 119–140. https://www.stata-journal.com/article.html?article=st0327"
  },
  {
    "objectID": "reffadjust4nlcom-examples.html",
    "href": "reffadjust4nlcom-examples.html",
    "title": "reffadjust4nlcom helpfile examples",
    "section": "",
    "text": "Examples 1 & 2 assume the path to the MLwiN executable is set in global MLwiN_path; see help runmlwin."
  },
  {
    "objectID": "reffadjust4nlcom-examples.html#example-1-two-level-continuous-response-model",
    "href": "reffadjust4nlcom-examples.html#example-1-two-level-continuous-response-model",
    "title": "reffadjust4nlcom helpfile examples",
    "section": "Example 1: Two level continuous response model",
    "text": "Example 1: Two level continuous response model\n(See page 59 of the MLwiN User Manual)\n\nread in data\n\n\nuse https://www.bristol.ac.uk/cmm/media/runmlwin/tutorial, clear\n\n\nfit model using MLwiN via runmlwin\n\n\nrunmlwin normexam cons standlrt, level1(student: cons) level2(school:cons standlrt) batch\n\n \n --- Begin MLwiN error log --- \nMLN - Software for N-level analysis.   Sat 25 Oct 2025 22:34:20\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77596.000003\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77596.000007\n --- End MLwiN error log --- \n\nWarning: getversion plugin could not be loaded\nMLwiN 3.16 multilevel model                     Number of obs      =      4059\nNormal response model (hierarchical)\nEstimation algorithm: IGLS\n\n-----------------------------------------------------------\n                |   No. of       Observations per Group\n Level Variable |   Groups    Minimum    Average    Maximum\n----------------+------------------------------------------\n         school |       65          2       62.4        198\n-----------------------------------------------------------\n\nRun time (seconds)   =       0.07\nNumber of iterations =          4\nLog likelihood       =  -4658.435\nDeviance             =    9316.87\n------------------------------------------------------------------------------\n    normexam |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n        cons |  -.0115051    .039783   -0.29    0.772    -.0894783     .066468\n    standlrt |   .5567305    .019937   27.92    0.000     .5176547    .5958062\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n   Random-effects Parameters |   Estimate   Std. Err.     [95% Conf. Interval]\n-----------------------------+------------------------------------------------\nLevel 2: school              |\n                   var(cons) |   .0904446    .017924      .0553142    .1255749\n          cov(cons,standlrt) |   .0180414   .0067229      .0048649     .031218\n               var(standlrt) |   .0145361   .0044139      .0058851    .0231872\n-----------------------------+------------------------------------------------\nLevel 1: student             |\n                   var(cons) |   .5536575   .0124818      .5291937    .5781214\n------------------------------------------------------------------------------\n\n\n/nogui option ignored\nECHO 0\n\nExecution completed\n\n\n\nreport coefficient and delta-method confidence interval\n\n\nreffadjust4nlcom cons standlrt, eqn(RP2)\nnlcom `r(beta_standlrt)'\n\n\n       _nl_1: [RP2]cov(cons\\standlrt)/[RP2]var(standlrt)\n\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       _nl_1 |   1.241144   .4275471     2.90   0.004     .4031675    2.079121\n------------------------------------------------------------------------------\n\n\n\ncompare reporting coefficient as median with 2.5 & 97.5 percentiles\n\n\nreffadjustsim cons standlrt, eqn(RP2) seed(12345)\n\n\n------------------------------------------------------------------------------\n        cons |     Median              2.5 Percentile      97.5 Percentile\n-------------+----------------------------------------------------------------\n    standlrt |   1.242541                 .4311653            2.607229\n------------------------------------------------------------------------------\n\n\n\ncompare reporting coefficient as mean & Wald-type confidence interval\nWarning: mean and Wald-type confidence are inaccurate in this example\n\n\nreffadjustsim cons standlrt, eqn(RP2) seed(12345) waldtype\n\n\n------------------------------------------------------------------------------\n        cons |      Coef.   Std. Err.                     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n    standlrt |   1.319134    1.22225                     -1.076431      3.7147\n------------------------------------------------------------------------------\nWarning: Coef. & Wald-type conf. interval limits may be inaccurate.\nPlease compare with default output which reports median & centiles.\n\n\n\nto view just the coefficient or string expression for the coefficient\n\n\nreffadjust4nlcom cons standlrt, eqn(RP2)\ndisplay `r(beta_standlrt)'\nmata st_macroexpand(\"`r(beta_standlrt)'\")\n\n1.2411444\n  [RP2]cov(cons\\standlrt)/[RP2]var(standlrt)\n\n\n\ncompare with Bayesian posterior distribution\n\n\nrunmlwin normexam cons standlrt, level1(student: cons) level2(school:cons standlrt) batch mcmc(on) initsprevious seed(121211)\nmcmcsum, getchains\nreffadjust4nlcom cons standlrt, eqn(RP2) mcmcsum\ngen beta_standlrt = `r(beta_standlrt)'\nmcmcsum beta_standlrt, variables\n\n \n\n\n/nogui option ignored\nECHO 0\n\nBURNING IN...\nBurning in for 50 iterations out of 500\nBurning in for 100 iterations out of 500\nBurning in for 150 iterations out of 500\nBurning in for 200 iterations out of 500\nBurning in for 250 iterations out of 500\nBurning in for 300 iterations out of 500\nBurning in for 350 iterations out of 500\nBurning in for 400 iterations out of 500\nBurning in for 450 iterations out of 500\nBurning in for 500 iterations out of 500\n\nActual update 50 of 5000, Stored update 50 of 5000\nActual update 100 of 5000, Stored update 100 of 5000\nActual update 150 of 5000, Stored update 150 of 5000\nActual update 200 of 5000, Stored update 200 of 5000\nActual update 250 of 5000, Stored update 250 of 5000\nActual update 300 of 5000, Stored update 300 of 5000\nActual update 350 of 5000, Stored update 350 of 5000\nActual update 400 of 5000, Stored update 400 of 5000\nActual update 450 of 5000, Stored update 450 of 5000\nActual update 500 of 5000, Stored update 500 of 5000\nActual update 550 of 5000, Stored update 550 of 5000\nActual update 600 of 5000, Stored update 600 of 5000\nActual update 650 of 5000, Stored update 650 of 5000\nActual update 700 of 5000, Stored update 700 of 5000\nActual update 750 of 5000, Stored update 750 of 5000\nActual update 800 of 5000, Stored update 800 of 5000\nActual update 850 of 5000, Stored update 850 of 5000\nActual update 900 of 5000, Stored update 900 of 5000\nActual update 950 of 5000, Stored update 950 of 5000\nActual update 1000 of 5000, Stored update 1000 of 5000\nActual update 1050 of 5000, Stored update 1050 of 5000\nActual update 1100 of 5000, Stored update 1100 of 5000\nActual update 1150 of 5000, Stored update 1150 of 5000\nActual update 1200 of 5000, Stored update 1200 of 5000\nActual update 1250 of 5000, Stored update 1250 of 5000\nActual update 1300 of 5000, Stored update 1300 of 5000\nActual update 1350 of 5000, Stored update 1350 of 5000\nActual update 1400 of 5000, Stored update 1400 of 5000\nActual update 1450 of 5000, Stored update 1450 of 5000\nActual update 1500 of 5000, Stored update 1500 of 5000\nActual update 1550 of 5000, Stored update 1550 of 5000\nActual update 1600 of 5000, Stored update 1600 of 5000\nActual update 1650 of 5000, Stored update 1650 of 5000\nActual update 1700 of 5000, Stored update 1700 of 5000\nActual update 1750 of 5000, Stored update 1750 of 5000\nActual update 1800 of 5000, Stored update 1800 of 5000\nActual update 1850 of 5000, Stored update 1850 of 5000\nActual update 1900 of 5000, Stored update 1900 of 5000\nActual update 1950 of 5000, Stored update 1950 of 5000\nActual update 2000 of 5000, Stored update 2000 of 5000\nActual update 2050 of 5000, Stored update 2050 of 5000\nActual update 2100 of 5000, Stored update 2100 of 5000\nActual update 2150 of 5000, Stored update 2150 of 5000\nActual update 2200 of 5000, Stored update 2200 of 5000\nActual update 2250 of 5000, Stored update 2250 of 5000\nActual update 2300 of 5000, Stored update 2300 of 5000\nActual update 2350 of 5000, Stored update 2350 of 5000\nActual update 2400 of 5000, Stored update 2400 of 5000\nActual update 2450 of 5000, Stored update 2450 of 5000\nActual update 2500 of 5000, Stored update 2500 of 5000\nActual update 2550 of 5000, Stored update 2550 of 5000\nActual update 2600 of 5000, Stored update 2600 of 5000\nActual update 2650 of 5000, Stored update 2650 of 5000\nActual update 2700 of 5000, Stored update 2700 of 5000\nActual update 2750 of 5000, Stored update 2750 of 5000\nActual update 2800 of 5000, Stored update 2800 of 5000\nActual update 2850 of 5000, Stored update 2850 of 5000\nActual update 2900 of 5000, Stored update 2900 of 5000\nActual update 2950 of 5000, Stored update 2950 of 5000\nActual update 3000 of 5000, Stored update 3000 of 5000\nActual update 3050 of 5000, Stored update 3050 of 5000\nActual update 3100 of 5000, Stored update 3100 of 5000\nActual update 3150 of 5000, Stored update 3150 of 5000\nActual update 3200 of 5000, Stored update 3200 of 5000\nActual update 3250 of 5000, Stored update 3250 of 5000\nActual update 3300 of 5000, Stored update 3300 of 5000\nActual update 3350 of 5000, Stored update 3350 of 5000\nActual update 3400 of 5000, Stored update 3400 of 5000\nActual update 3450 of 5000, Stored update 3450 of 5000\nActual update 3500 of 5000, Stored update 3500 of 5000\nActual update 3550 of 5000, Stored update 3550 of 5000\nActual update 3600 of 5000, Stored update 3600 of 5000\nActual update 3650 of 5000, Stored update 3650 of 5000\nActual update 3700 of 5000, Stored update 3700 of 5000\nActual update 3750 of 5000, Stored update 3750 of 5000\nActual update 3800 of 5000, Stored update 3800 of 5000\nActual update 3850 of 5000, Stored update 3850 of 5000\nActual update 3900 of 5000, Stored update 3900 of 5000\nActual update 3950 of 5000, Stored update 3950 of 5000\nActual update 4000 of 5000, Stored update 4000 of 5000\nActual update 4050 of 5000, Stored update 4050 of 5000\nActual update 4100 of 5000, Stored update 4100 of 5000\nActual update 4150 of 5000, Stored update 4150 of 5000\nActual update 4200 of 5000, Stored update 4200 of 5000\nActual update 4250 of 5000, Stored update 4250 of 5000\nActual update 4300 of 5000, Stored update 4300 of 5000\nActual update 4350 of 5000, Stored update 4350 of 5000\n\n\n --- Begin MLwiN error log --- \nMLN - Software for N-level analysis.   Sat 25 Oct 2025 22:34:20\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77596.000007\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77596.00000b\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77596.000005\n --- End MLwiN error log --- \n\n\n\nActual update 4400 of 5000, Stored update 4400 of 5000\nActual update 4450 of 5000, Stored update 4450 of 5000\nActual update 4500 of 5000, Stored update 4500 of 5000\nActual update 4550 of 5000, Stored update 4550 of 5000\nActual update 4600 of 5000, Stored update 4600 of 5000\nActual update 4650 of 5000, Stored update 4650 of 5000\nActual update 4700 of 5000, Stored update 4700 of 5000\nActual update 4750 of 5000, Stored update 4750 of 5000\nActual update 4800 of 5000, Stored update 4800 of 5000\nActual update 4850 of 5000, Stored update 4850 of 5000\nActual update 4900 of 5000, Stored update 4900 of 5000\nActual update 4950 of 5000, Stored update 4950 of 5000\nActual update 5000 of 5000, Stored update 5000 of 5000\nExecution completed\n\n\nWarning: getversion plugin could not be loaded\nMLwiN 3.16 multilevel model                     Number of obs      =      4059\nNormal response model (hierarchical)\nEstimation algorithm: MCMC\n\n-----------------------------------------------------------\n                |   No. of       Observations per Group\n Level Variable |   Groups    Minimum    Average    Maximum\n----------------+------------------------------------------\n         school |       65          2       62.4        198\n-----------------------------------------------------------\n\nBurnin                     =        500\nChain                      =       5000\nThinning                   =          1\nRun time (seconds)         =       .906\nDeviance (dbar)            =    9122.42\nDeviance (thetabar)        =    9031.09\nEffective no. of pars (pd) =      91.34\nBayesian DIC               =    9213.76\n------------------------------------------------------------------------------\n    normexam |      Mean    Std. Dev.     ESS     P       [95% Cred. Interval]\n-------------+----------------------------------------------------------------\n        cons |   -.010594    .040224      189   0.395    -.0908355    .0678323\n    standlrt |   .5568075   .0200344      839   0.000     .5167302    .5960792\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n   Random-effects Parameters |     Mean   Std. Dev.   ESS     [95% Cred. Int]\n-----------------------------+------------------------------------------------\nLevel 2: school              |\n                   var(cons) |  .0961163  .0199991   2715   .0644542  .1421674\n          cov(cons,standlrt) |  .0190683  .0072205   1713   .0065699   .034989\n               var(standlrt) |  .0153485  .0046893    978   .0078805  .0261361\n-----------------------------+------------------------------------------------\nLevel 1: student             |\n                   var(cons) |  .5542075  .0123209   4645   .5309043   .578929\n------------------------------------------------------------------------------\n------------------------------------------------------------------------------\n             |      Mean    Std. Dev.     ESS     P       [95% Cred. Interval]\n-------------+----------------------------------------------------------------\nbeta_standlrt|   1.289067    .456183      857   0.001     .4577979       2.279\n------------------------------------------------------------------------------"
  },
  {
    "objectID": "reffadjust4nlcom-examples.html#example-2-multivariate-response-model",
    "href": "reffadjust4nlcom-examples.html#example-2-multivariate-response-model",
    "title": "reffadjust4nlcom helpfile examples",
    "section": "Example 2: Multivariate response model",
    "text": "Example 2: Multivariate response model\n(See page 214 of the MLwiN User Manual)\n\nread in data\n\n\nuse https://www.bristol.ac.uk/cmm/media/runmlwin/gcsemv1, clear\n\n\nfit model using MLwiN via runmlwin\n\n\nrunmlwin (written cons female, eq(1)) (csework cons female, eq(2)), ///\n        level1(student: (cons, eq(1)) (cons, eq(2))) ///\n        level2(school: (cons, eq(1)) (cons, eq(2))) ///\n        batch\n\n \n --- Begin MLwiN error log --- \nMLN - Software for N-level analysis.   Sat 25 Oct 2025 22:34:21\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77596.000006\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77596.00000a\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77596.00000b\n --- End MLwiN error log --- \n\nWarning: getversion plugin could not be loaded\nMLwiN 3.16 multilevel model                     Number of obs      =      1905\nMultivariate response model (hierarchical)\nEstimation algorithm: IGLS\n\n-----------------------------------------------------------\n                |   No. of       Observations per Group\n Level Variable |   Groups    Minimum    Average    Maximum\n----------------+------------------------------------------\n         school |       73          2       26.1        104\n-----------------------------------------------------------\n\nRun time (seconds)   =       0.10\nNumber of iterations =          4\nLog likelihood       = -13400.244\nDeviance             =  26800.488\n------------------------------------------------------------------------------\n             |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\nwritten      |\n      cons_1 |   49.45213   .9338433   52.96    0.000     47.62183    51.28243\n    female_1 |   -2.50295   .5607219   -4.46    0.000    -3.601945   -1.403955\n-------------+----------------------------------------------------------------\ncsework      |\n      cons_2 |   69.67166   1.171786   59.46    0.000       67.375    71.96831\n    female_2 |   6.751393   .6706493   10.07    0.000     5.436944    8.065841\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n   Random-effects Parameters |   Estimate   Std. Err.     [95% Conf. Interval]\n-----------------------------+------------------------------------------------\nLevel 2: school              |\n                 var(cons_1) |   46.81298    9.18733      28.80615    64.81982\n          cov(cons_1,cons_2) |   24.87783   8.880358       7.47265    42.28301\n                 var(cons_2) |   75.16623   14.56485      46.61965    103.7128\n-----------------------------+------------------------------------------------\nLevel 1: student             |\n                 var(cons_1) |   124.6343   4.349834      116.1088    133.1598\n          cov(cons_1,cons_2) |   73.00323    4.17829      64.81393    81.19252\n                 var(cons_2) |   180.0982   6.245801      167.8566    192.3397\n------------------------------------------------------------------------------\n\n\n/nogui option ignored\nECHO 0\n\nExecution completed\n\n\n\nreport coefficient and delta-method confidence interval\n\n\nreffadjust4nlcom cons_1 cons_2, eqn(RP2)\nnlcom `r(beta_cons_2)'\n\n\n       _nl_1: [RP2]cov(cons_1\\cons_2)/[RP2]var(cons_2)\n\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       _nl_1 |   .3309709   .0986417     3.36   0.001     .1376367    .5243051\n------------------------------------------------------------------------------\n\n\n\ncompare reporting coefficient as median with 2.5 and 97.5 percentiles\n\n\nreffadjustsim cons_1 cons_2, eqn(RP2) seed(12345)\n\n\n------------------------------------------------------------------------------\n      cons_1 |     Median              2.5 Percentile      97.5 Percentile\n-------------+----------------------------------------------------------------\n      cons_2 |   .3308853                 .1231026            .5395364\n------------------------------------------------------------------------------\n\n\n\ncompare reporting coefficient as mean with Wald-type confidence interval\n\n\nreffadjustsim cons_1 cons_2, eqn(RP2) seed(12345) waldtype\n\n\n------------------------------------------------------------------------------\n      cons_1 |      Coef.   Std. Err.                     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n      cons_2 |    .330939   .1065639                      .1220777    .5398003\n------------------------------------------------------------------------------\nWarning: Coef. & Wald-type conf. interval limits may be inaccurate.\nPlease compare with default output which reports median & centiles.\n\n\n\nto view just the coefficient or string expression for the coefficient\n\n\nreffadjust4nlcom cons_1 cons_2, eqn(RP2)\ndisplay `r(beta_cons_2)'\nmata st_macroexpand(\"`r(beta_cons_2)'\")\n\n.33097086\n  [RP2]cov(cons_1\\cons_2)/[RP2]var(cons_2)\n\n\n\ncompare with Bayesian posterior distribution\n\n\nrunmlwin (written cons female, eq(1)) (csework cons female, eq(2)), ///\n        level1(student: (cons, eq(1)) (cons, eq(2))) ///\n        level2(school: (cons, eq(1)) (cons, eq(2))) ///\n        batch mcmc(on) initsprevious seed(121211)\nmcmcsum, getchains\nreffadjust4nlcom cons_1 cons_2, eqn(RP2) mcmcsum\ngen beta_cons_2 = `r(beta_cons_2)'\nmcmcsum beta_cons_2, variables\n\n \n\n\n/nogui option ignored\nECHO 0\n\nBURNING IN...\nBurning in for 50 iterations out of 500\nBurning in for 100 iterations out of 500\nBurning in for 150 iterations out of 500\nBurning in for 200 iterations out of 500\nBurning in for 250 iterations out of 500\nBurning in for 300 iterations out of 500\nBurning in for 350 iterations out of 500\nBurning in for 400 iterations out of 500\nBurning in for 450 iterations out of 500\nBurning in for 500 iterations out of 500\n\nActual update 50 of 5000, Stored update 50 of 5000\nActual update 100 of 5000, Stored update 100 of 5000\nActual update 150 of 5000, Stored update 150 of 5000\nActual update 200 of 5000, Stored update 200 of 5000\nActual update 250 of 5000, Stored update 250 of 5000\nActual update 300 of 5000, Stored update 300 of 5000\nActual update 350 of 5000, Stored update 350 of 5000\nActual update 400 of 5000, Stored update 400 of 5000\nActual update 450 of 5000, Stored update 450 of 5000\nActual update 500 of 5000, Stored update 500 of 5000\nActual update 550 of 5000, Stored update 550 of 5000\nActual update 600 of 5000, Stored update 600 of 5000\nActual update 650 of 5000, Stored update 650 of 5000\nActual update 700 of 5000, Stored update 700 of 5000\nActual update 750 of 5000, Stored update 750 of 5000\nActual update 800 of 5000, Stored update 800 of 5000\nActual update 850 of 5000, Stored update 850 of 5000\nActual update 900 of 5000, Stored update 900 of 5000\nActual update 950 of 5000, Stored update 950 of 5000\nActual update 1000 of 5000, Stored update 1000 of 5000\nActual update 1050 of 5000, Stored update 1050 of 5000\nActual update 1100 of 5000, Stored update 1100 of 5000\nActual update 1150 of 5000, Stored update 1150 of 5000\nActual update 1200 of 5000, Stored update 1200 of 5000\nActual update 1250 of 5000, Stored update 1250 of 5000\nActual update 1300 of 5000, Stored update 1300 of 5000\nActual update 1350 of 5000, Stored update 1350 of 5000\nActual update 1400 of 5000, Stored update 1400 of 5000\nActual update 1450 of 5000, Stored update 1450 of 5000\nActual update 1500 of 5000, Stored update 1500 of 5000\nActual update 1550 of 5000, Stored update 1550 of 5000\nActual update 1600 of 5000, Stored update 1600 of 5000\nActual update 1650 of 5000, Stored update 1650 of 5000\nActual update 1700 of 5000, Stored update 1700 of 5000\nActual update 1750 of 5000, Stored update 1750 of 5000\nActual update 1800 of 5000, Stored update 1800 of 5000\nActual update 1850 of 5000, Stored update 1850 of 5000\nActual update 1900 of 5000, Stored update 1900 of 5000\nActual update 1950 of 5000, Stored update 1950 of 5000\nActual update 2000 of 5000, Stored update 2000 of 5000\nActual update 2050 of 5000, Stored update 2050 of 5000\nActual update 2100 of 5000, Stored update 2100 of 5000\nActual update 2150 of 5000, Stored update 2150 of 5000\nActual update 2200 of 5000, Stored update 2200 of 5000\nActual update 2250 of 5000, Stored update 2250 of 5000\nActual update 2300 of 5000, Stored update 2300 of 5000\nActual update 2350 of 5000, Stored update 2350 of 5000\nActual update 2400 of 5000, Stored update 2400 of 5000\nActual update 2450 of 5000, Stored update 2450 of 5000\nActual update 2500 of 5000, Stored update 2500 of 5000\nActual update 2550 of 5000, Stored update 2550 of 5000\nActual update 2600 of 5000, Stored update 2600 of 5000\nActual update 2650 of 5000, Stored update 2650 of 5000\nActual update 2700 of 5000, Stored update 2700 of 5000\nActual update 2750 of 5000, Stored update 2750 of 5000\nActual update 2800 of 5000, Stored update 2800 of 5000\nActual update 2850 of 5000, Stored update 2850 of 5000\nActual update 2900 of 5000, Stored update 2900 of 5000\nActual update 2950 of 5000, Stored update 2950 of 5000\nActual update 3000 of 5000, Stored update 3000 of 5000\nActual update 3050 of 5000, Stored update 3050 of 5000\nActual update 3100 of 5000, Stored update 3100 of 5000\nActual update 3150 of 5000, Stored update 3150 of 5000\nActual update 3200 of 5000, Stored update 3200 of 5000\nActual update 3250 of 5000, Stored update 3250 of 5000\nActual update 3300 of 5000, Stored update 3300 of 5000\nActual update 3350 of 5000, Stored update 3350 of 5000\nActual update 3400 of 5000, Stored update 3400 of 5000\nActual update 3450 of 5000, Stored update 3450 of 5000\nActual update 3500 of 5000, Stored update 3500 of 5000\nActual update 3550 of 5000, Stored update 3550 of 5000\nActual update 3600 of 5000, Stored update 3600 of 5000\nActual update 3650 of 5000, Stored update 3650 of 5000\nActual update 3700 of 5000, Stored update 3700 of 5000\nActual update 3750 of 5000, Stored update 3750 of 5000\nActual update 3800 of 5000, Stored update 3800 of 5000\nActual update 3850 of 5000, Stored update 3850 of 5000\nActual update 3900 of 5000, Stored update 3900 of 5000\nActual update 3950 of 5000, Stored update 3950 of 5000\nActual update 4000 of 5000, Stored update 4000 of 5000\nActual update 4050 of 5000, Stored update 4050 of 5000\nActual update 4100 of 5000, Stored update 4100 of 5000\nActual update 4150 of 5000, Stored update 4150 of 5000\nActual update 4200 of 5000, Stored update 4200 of 5000\nActual update 4250 of 5000, Stored update 4250 of 5000\nActual update 4300 of 5000, Stored update 4300 of 5000\nActual update 4350 of 5000, Stored update 4350 of 5000\nActual update 4400 of 5000, Stored update 4400 of 5000\nActual update 4450 of 5000, Stored update 4450 of 5000\nActual update 4500 of 5000, Stored update 4500 of 5000\nActual update 4550 of 5000, Stored update 4550 of 5000\nActual update 4600 of 5000, Stored update 4600 of 5000\nActual update 4650 of 5000, Stored update 4650 of 5000\nActual update 4700 of 5000, Stored update 4700 of 5000\nActual update 4750 of 5000, Stored update 4750 of 5000\nActual update 4800 of 5000, Stored update 4800 of 5000\n\n\n --- Begin MLwiN error log --- \nMLN - Software for N-level analysis.   Sat 25 Oct 2025 22:34:22\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77596.00000a\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77596.00000e\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77596.00000f\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77596.000008\n --- End MLwiN error log --- \n\n\n\nActual update 4850 of 5000, Stored update 4850 of 5000\nActual update 4900 of 5000, Stored update 4900 of 5000\nActual update 4950 of 5000, Stored update 4950 of 5000\nActual update 5000 of 5000, Stored update 5000 of 5000\nExecution completed\n\n\nWarning: getversion plugin could not be loaded\nMLwiN 3.16 multilevel model                     Number of obs      =      1905\nMultivariate response model (hierarchical)\nEstimation algorithm: MCMC\n\n-----------------------------------------------------------\n                |   No. of       Observations per Group\n Level Variable |   Groups    Minimum    Average    Maximum\n----------------+------------------------------------------\n         school |       73          2       26.1        104\n-----------------------------------------------------------\n\nBurnin                     =        500\nChain                      =       5000\nThinning                   =          1\nRun time (seconds)         =       1.08\nDeviance (dbar)            =   29388.29\nDeviance (thetabar)        =   28877.57\nEffective no. of pars (pd) =     510.73\nBayesian DIC               =   29899.02\n------------------------------------------------------------------------------\n             |      Mean    Std. Dev.     ESS     P       [95% Cred. Interval]\n-------------+----------------------------------------------------------------\nwritten      |\n      cons_1 |   49.50607   .9899419      242   0.000     47.57032    51.46915\n    female_1 |  -2.492796   .5577673     3451   0.000    -3.593134   -1.390972\n-------------+----------------------------------------------------------------\ncsework      |\n      cons_2 |    69.6792   1.232286      222   0.000     67.27528    72.03018\n    female_2 |   6.761519     .67411     3672   0.000     5.458935    8.089689\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n   Random-effects Parameters |     Mean   Std. Dev.   ESS     [95% Cred. Int]\n-----------------------------+------------------------------------------------\nLevel 2: school              |\n                 var(cons_1) |  50.08992   10.5095   2376   32.88132  73.71481\n          cov(cons_1,cons_2) |  26.20564  9.578987   2490   9.893032  46.83127\n                 var(cons_2) |  78.90363  15.49003   2637   53.52962  112.7813\n-----------------------------+------------------------------------------------\nLevel 1: student             |\n                 var(cons_1) |  124.8802  4.356383   3734   116.8696  133.6906\n          cov(cons_1,cons_2) |    73.189  4.186575   3819   65.23343  81.54988\n                 var(cons_2) |   180.573   6.35916   4068   168.6235  193.2279\n------------------------------------------------------------------------------\n------------------------------------------------------------------------------\n             |      Mean    Std. Dev.     ESS     P       [95% Cred. Interval]\n-------------+----------------------------------------------------------------\n beta_cons_2 |   .3318915   .1002958     2477   0.000     .1324359    .5296823\n------------------------------------------------------------------------------"
  },
  {
    "objectID": "reffadjust4nlcom-examples.html#example-3-based-on-xtmixed-helpfile",
    "href": "reffadjust4nlcom-examples.html#example-3-based-on-xtmixed-helpfile",
    "title": "reffadjust4nlcom helpfile examples",
    "section": "Example 3: based on xtmixed helpfile",
    "text": "Example 3: based on xtmixed helpfile\n\nwebuse nlswork, clear\nversion 12: xtmixed ln_w grade age c.age#c.age ttl_exp tenure ///\n    c.tenure#c.tenure || idcode: tenure, cov(uns) var\nversion 12: reffadjust4nlcom _cons tenure, eqn(idcode)\nnlcom `r(beta_tenure)'\n\n(National Longitudinal Survey of Young Women, 14-24 years old in 1968)\n\nPerforming EM optimization: \n\nPerforming gradient-based optimization: \n\nIteration 0:  Log likelihood = -8985.3816  \nIteration 1:  Log likelihood = -8966.2878  \nIteration 2:  Log likelihood =  -8965.819  \nIteration 3:  Log likelihood =  -8965.819  \n\nComputing standard errors:\n\nMixed-effects ML regression                         Number of obs    =  28,099\nGroup variable: idcode                              Number of groups =   4,697\n                                                    Obs per group:\n                                                                 min =       1\n                                                                 avg =     6.0\n                                                                 max =      15\n                                                    Wald chi2(6)     = 6767.13\nLog likelihood =  -8965.819                         Prob &gt; chi2      =  0.0000\n\n------------------------------------------------------------------------------\n     ln_wage | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       grade |   .0690318   .0017885    38.60   0.000     .0655264    .0725372\n         age |   .0321872   .0027908    11.53   0.000     .0267174     .037657\n             |\n c.age#c.age |  -.0006574   .0000466   -14.09   0.000    -.0007488    -.000566\n             |\n     ttl_exp |   .0350762   .0011352    30.90   0.000     .0328513     .037301\n      tenure |   .0393576   .0017198    22.88   0.000     .0359868    .0427284\n             |\n    c.tenure#|\n    c.tenure |  -.0019926   .0001232   -16.18   0.000    -.0022341   -.0017512\n             |\n       _cons |    .162264    .044888     3.61   0.000     .0742851    .2502429\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\nidcode: Unstructured         |\n                 var(tenure) |   .0005174   .0000566      .0004176    .0006411\n                  var(_cons) |   .0632497   .0020808      .0593001    .0674624\n           cov(tenure,_cons) |   .0007165   .0002809      .0001658    .0012671\n-----------------------------+------------------------------------------------\n               var(Residual) |   .0815016   .0007978      .0799529    .0830803\n------------------------------------------------------------------------------\nLR test vs. linear model: chi2(3) = 9168.36               Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n       _nl_1: tanh([atr1_1_1_2]_cons)*exp([lns1_1_1]_cons + [lns1_1_2]_cons)/ex\n&gt; p(2*[lns1_1_1]_cons)\n\n------------------------------------------------------------------------------\n     ln_wage | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       _nl_1 |   1.384766   .6149302     2.25   0.024      .179525    2.590007\n------------------------------------------------------------------------------\n\n\n\nmixed ln_w grade age c.age#c.age ttl_exp tenure c.tenure#c.tenure || ///\n        idcode: tenure, cov(uns)\nreffadjust4nlcom _cons tenure, eqn(idcode)\nnlcom `r(beta_tenure)'\n\n\nPerforming EM optimization ...\n\nPerforming gradient-based optimization: \nIteration 0:  Log likelihood = -8985.3816  \nIteration 1:  Log likelihood = -8966.3961  \nIteration 2:  Log likelihood =  -8965.819  \nIteration 3:  Log likelihood =  -8965.819  \n\nComputing standard errors ...\n\nMixed-effects ML regression                         Number of obs    =  28,099\nGroup variable: idcode                              Number of groups =   4,697\n                                                    Obs per group:\n                                                                 min =       1\n                                                                 avg =     6.0\n                                                                 max =      15\n                                                    Wald chi2(6)     = 6767.13\nLog likelihood =  -8965.819                         Prob &gt; chi2      =  0.0000\n\n------------------------------------------------------------------------------\n     ln_wage | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       grade |   .0690318   .0017885    38.60   0.000     .0655264    .0725372\n         age |   .0321872   .0027908    11.53   0.000     .0267174     .037657\n             |\n c.age#c.age |  -.0006574   .0000466   -14.09   0.000    -.0007488    -.000566\n             |\n     ttl_exp |   .0350762   .0011352    30.90   0.000     .0328513     .037301\n      tenure |   .0393576   .0017198    22.88   0.000     .0359868    .0427284\n             |\n    c.tenure#|\n    c.tenure |  -.0019926   .0001232   -16.18   0.000    -.0022341   -.0017512\n             |\n       _cons |    .162264    .044888     3.61   0.000     .0742851    .2502429\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\nidcode: Unstructured         |\n                 var(tenure) |   .0005174   .0000566      .0004176    .0006411\n                  var(_cons) |   .0632497   .0020808      .0593001    .0674624\n           cov(tenure,_cons) |   .0007165   .0002809      .0001658    .0012671\n-----------------------------+------------------------------------------------\n               var(Residual) |   .0815016   .0007978      .0799529    .0830803\n------------------------------------------------------------------------------\nLR test vs. linear model: chi2(3) = 9168.36               Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n       _nl_1: tanh([atr1_1_1_2]_cons)*exp([lns1_1_1]_cons + [lns1_1_2]_cons)/ex\n&gt; p(2*[lns1_1_1]_cons)\n\n------------------------------------------------------------------------------\n     ln_wage | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       _nl_1 |   1.384767   .6149298     2.25   0.024     .1795264    2.590007\n------------------------------------------------------------------------------"
  },
  {
    "objectID": "reffadjust4nlcom-examples.html#example-4-based-on-xtmelogit-helpfile",
    "href": "reffadjust4nlcom-examples.html#example-4-based-on-xtmelogit-helpfile",
    "title": "reffadjust4nlcom helpfile examples",
    "section": "Example 4: based on xtmelogit helpfile",
    "text": "Example 4: based on xtmelogit helpfile\n\nwebuse bangladesh, clear\nversion 12: xtmelogit c_use urban age child* || district: urban, cov(uns) var\nversion 12: reffadjust4nlcom _cons urban, eqn(district)\nnlcom `r(beta_urban)'\n\n(Bangladesh Fertility Survey, 1989)\nnote: children omitted because of collinearity.\n\nRefining starting values: \n\nIteration 0:  Log likelihood = -1215.8594  (not concave)\nIteration 1:  Log likelihood = -1204.0802  \nIteration 2:  Log likelihood = -1199.7968  \n\nPerforming gradient-based optimization: \n\nIteration 0:  Log likelihood = -1199.7968  \nIteration 1:  Log likelihood = -1199.4726  \nIteration 2:  Log likelihood = -1199.3158  \nIteration 3:  Log likelihood =  -1199.315  \nIteration 4:  Log likelihood =  -1199.315  \n\nMixed-effects logistic regression               Number of obs     =      1,934\nGroup variable: district                        Number of groups  =         60\n\n                                                Obs per group:\n                                                              min =          2\n                                                              avg =       32.2\n                                                              max =        118\n\nIntegration points =   7                        Wald chi2(5)      =      97.50\nLog likelihood =  -1199.315                     Prob &gt; chi2       =     0.0000\n\n------------------------------------------------------------------------------\n       c_use | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       urban |   .8157872   .1715519     4.76   0.000     .4795516    1.152023\n         age |   -.026415    .008023    -3.29   0.001    -.0421398   -.0106902\n      child1 |    1.13252   .1603285     7.06   0.000      .818282    1.446758\n      child2 |   1.357739   .1770522     7.67   0.000     1.010724    1.704755\n      child3 |   1.353827   .1828801     7.40   0.000     .9953882    1.712265\n    children |          0  (omitted)\n       _cons |   -1.71165   .1605617   -10.66   0.000    -2.026345   -1.396954\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\ndistrict: Unstructured       |\n                  var(urban) |   .6663221   .3224714      .2580709      1.7204\n                  var(_cons) |   .3897434   .1292458      .2034723    .7465387\n            cov(urban,_cons) |  -.4058846   .1755418     -.7499402   -.0618289\n------------------------------------------------------------------------------\nLR test vs. logistic model: chi2(3) = 58.42               Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n       _nl_1: tanh([atr1_1_1_2]_cons)*exp([lns1_1_1]_cons + [lns1_1_2]_cons)/ex\n&gt; p(2*[lns1_1_1]_cons)\n\n------------------------------------------------------------------------------\n       c_use | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       _nl_1 |  -.6091417   .1605193    -3.79   0.000    -.9237537   -.2945297\n------------------------------------------------------------------------------\n\n\n\nmeqrlogit c_use urban age child* || district: urban, cov(uns)\nreffadjust4nlcom _cons urban, eqn(district)\nnlcom `r(beta_urban)'\n\nnote: children omitted because of collinearity.\n\nRefining starting values: \n\nIteration 0:  Log likelihood = -1215.8594  (not concave)\nIteration 1:  Log likelihood = -1204.0802  \nIteration 2:  Log likelihood = -1199.7968  \n\nPerforming gradient-based optimization: \n\nIteration 0:  Log likelihood = -1199.7968  \nIteration 1:  Log likelihood = -1199.4726  \nIteration 2:  Log likelihood = -1199.3158  \nIteration 3:  Log likelihood =  -1199.315  \nIteration 4:  Log likelihood =  -1199.315  \n\nMixed-effects logistic regression               Number of obs     =      1,934\nGroup variable: district                        Number of groups  =         60\n\n                                                Obs per group:\n                                                              min =          2\n                                                              avg =       32.2\n                                                              max =        118\n\nIntegration points =   7                        Wald chi2(5)      =      97.50\nLog likelihood =  -1199.315                     Prob &gt; chi2       =     0.0000\n\n------------------------------------------------------------------------------\n       c_use | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       urban |   .8157872   .1715519     4.76   0.000     .4795516    1.152023\n         age |   -.026415    .008023    -3.29   0.001    -.0421398   -.0106902\n      child1 |    1.13252   .1603285     7.06   0.000      .818282    1.446758\n      child2 |   1.357739   .1770522     7.67   0.000     1.010724    1.704755\n      child3 |   1.353827   .1828801     7.40   0.000     .9953882    1.712265\n    children |          0  (omitted)\n       _cons |   -1.71165   .1605617   -10.66   0.000    -2.026345   -1.396954\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\ndistrict: Unstructured       |\n                  var(urban) |   .6663221   .3224714      .2580709      1.7204\n                  var(_cons) |   .3897434   .1292458      .2034723    .7465387\n            cov(urban,_cons) |  -.4058846   .1755418     -.7499402   -.0618289\n------------------------------------------------------------------------------\nLR test vs. logistic model: chi2(3) = 58.42               Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n       _nl_1: tanh([atr1_1_1_2]_cons)*exp([lns1_1_1]_cons + [lns1_1_2]_cons)/ex\n&gt; p(2*[lns1_1_1]_cons)\n\n------------------------------------------------------------------------------\n       c_use | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       _nl_1 |  -.6091417   .1605193    -3.79   0.000    -.9237537   -.2945297\n------------------------------------------------------------------------------"
  },
  {
    "objectID": "reffadjust4nlcom-examples.html#example-5-based-on-xtmepoisson-helpfile",
    "href": "reffadjust4nlcom-examples.html#example-5-based-on-xtmepoisson-helpfile",
    "title": "reffadjust4nlcom helpfile examples",
    "section": "Example 5: based on xtmepoisson helpfile",
    "text": "Example 5: based on xtmepoisson helpfile\n\nwebuse epilepsy, clear\nversion 12: xtmepoisson seizures treat lbas lbas_trt lage visit || ///\n        subject: visit, cov(uns) var intpoints(9)\nversion 12: reffadjust4nlcom _cons visit, eqn(subject)\nnlcom `r(beta_visit)'\n\n(Epilepsy data; progabide drug treatment)\n\nRefining starting values: \n\nIteration 0:  Log likelihood = -672.17188  (not concave)\nIteration 1:  Log likelihood = -660.46056  \nIteration 2:  Log likelihood = -655.86888  \n\nPerforming gradient-based optimization: \n\nIteration 0:  Log likelihood = -655.86888  \nIteration 1:  Log likelihood = -655.68217  \nIteration 2:  Log likelihood = -655.68103  \nIteration 3:  Log likelihood = -655.68103  \n\nMixed-effects Poisson regression                Number of obs     =        236\nGroup variable: subject                         Number of groups  =         59\n\n                                                Obs per group:\n                                                              min =          4\n                                                              avg =        4.0\n                                                              max =          4\n\nIntegration points =   9                        Wald chi2(5)      =     115.56\nLog likelihood = -655.68103                     Prob &gt; chi2       =     0.0000\n\n------------------------------------------------------------------------------\n    seizures | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       treat |  -.9286588   .4021638    -2.31   0.021    -1.716885   -.1404323\n        lbas |   .8849767   .1312519     6.74   0.000     .6277277    1.142226\n    lbas_trt |   .3379757   .2044442     1.65   0.098    -.0627276     .738679\n        lage |   .4767192    .353622     1.35   0.178    -.2163672    1.169806\n       visit |  -.2664098   .1647096    -1.62   0.106    -.5892347    .0564151\n       _cons |   2.099555   .2203709     9.53   0.000     1.667636    2.531474\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\nsubject: Unstructured        |\n                  var(visit) |   .5314808   .2293851      .2280931    1.238406\n                  var(_cons) |   .2514928   .0587892      .1590552    .3976522\n            cov(visit,_cons) |   .0028715   .0887018     -.1709808    .1767238\n------------------------------------------------------------------------------\nLR test vs. Poisson model: chi2(3) = 324.54               Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n       _nl_1: tanh([atr1_1_1_2]_cons)*exp([lns1_1_1]_cons + [lns1_1_2]_cons)/ex\n&gt; p(2*[lns1_1_1]_cons)\n\n------------------------------------------------------------------------------\n    seizures | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       _nl_1 |   .0054029   .1669653     0.03   0.974    -.3218432    .3326489\n------------------------------------------------------------------------------\n\n\n\nmeqrpoisson seizures treat lbas lbas_trt lage visit || subject: visit, ///\n    cov(uns) intpoints(9)\nreffadjust4nlcom _cons visit, eqn(subject)\nnlcom `r(beta_visit)'\n\n\nRefining starting values: \n\nIteration 0:  Log likelihood = -672.17188  (not concave)\nIteration 1:  Log likelihood = -660.46056  \nIteration 2:  Log likelihood = -655.86888  \n\nPerforming gradient-based optimization: \n\nIteration 0:  Log likelihood = -655.86888  \nIteration 1:  Log likelihood = -655.68217  \nIteration 2:  Log likelihood = -655.68103  \nIteration 3:  Log likelihood = -655.68103  \n\nMixed-effects Poisson regression                Number of obs     =        236\nGroup variable: subject                         Number of groups  =         59\n\n                                                Obs per group:\n                                                              min =          4\n                                                              avg =        4.0\n                                                              max =          4\n\nIntegration points =   9                        Wald chi2(5)      =     115.56\nLog likelihood = -655.68103                     Prob &gt; chi2       =     0.0000\n\n------------------------------------------------------------------------------\n    seizures | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       treat |  -.9286588   .4021638    -2.31   0.021    -1.716885   -.1404323\n        lbas |   .8849767   .1312519     6.74   0.000     .6277277    1.142226\n    lbas_trt |   .3379757   .2044442     1.65   0.098    -.0627276     .738679\n        lage |   .4767192    .353622     1.35   0.178    -.2163672    1.169806\n       visit |  -.2664098   .1647096    -1.62   0.106    -.5892347    .0564151\n       _cons |   2.099555   .2203709     9.53   0.000     1.667636    2.531474\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\nsubject: Unstructured        |\n                  var(visit) |   .5314808   .2293851      .2280931    1.238406\n                  var(_cons) |   .2514928   .0587892      .1590552    .3976522\n            cov(visit,_cons) |   .0028715   .0887018     -.1709808    .1767238\n------------------------------------------------------------------------------\nLR test vs. Poisson model: chi2(3) = 324.54               Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n       _nl_1: tanh([atr1_1_1_2]_cons)*exp([lns1_1_1]_cons + [lns1_1_2]_cons)/ex\n&gt; p(2*[lns1_1_1]_cons)\n\n------------------------------------------------------------------------------\n    seizures | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       _nl_1 |   .0054029   .1669653     0.03   0.974    -.3218432    .3326489\n------------------------------------------------------------------------------"
  },
  {
    "objectID": "reffadjust4nlcom-examples.html#example-6-repeated-group-variable",
    "href": "reffadjust4nlcom-examples.html#example-6-repeated-group-variable",
    "title": "reffadjust4nlcom helpfile examples",
    "section": "Example 6: repeated group variable",
    "text": "Example 6: repeated group variable\n\nwebuse nlswork, clear\nversion 12: xtmixed ln_w grade age || idcode: tenure union, cov(uns) || ///\n    idcode: race, cov(uns) var\nversion 12: reffadjust4nlcom tenure union, eqn(idcode) sub(1)\nnlcom `r(beta_union)'\nversion 12: reffadjust4nlcom race _cons, eqn(idcode) sub(2)\nnlcom `r(beta__cons)'\n\n(National Longitudinal Survey of Young Women, 14-24 years old in 1968)\n\nPerforming EM optimization: \n\nPerforming gradient-based optimization: \n\nIteration 0:  Log likelihood = -5208.9293  \nIteration 1:  Log likelihood = -5196.8989  (not concave)\nIteration 2:  Log likelihood = -5176.1013  \nIteration 3:  Log likelihood = -5174.4196  \nIteration 4:  Log likelihood = -5171.2001  \nIteration 5:  Log likelihood = -5171.0595  \nIteration 6:  Log likelihood = -5171.0493  \nIteration 7:  Log likelihood = -5171.0492  \n\nComputing standard errors:\n\nMixed-effects ML regression                         Number of obs    =  19,008\nGroup variable: idcode                              Number of groups =   4,132\n                                                    Obs per group:\n                                                                 min =       1\n                                                                 avg =     4.6\n                                                                 max =      12\n                                                    Wald chi2(2)     = 2164.18\nLog likelihood = -5171.0492                         Prob &gt; chi2      =  0.0000\n\n------------------------------------------------------------------------------\n     ln_wage | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       grade |    .083625   .0022067    37.90   0.000        .0793      .08795\n         age |   .0104518   .0004215    24.80   0.000     .0096256    .0112779\n       _cons |   .2739857   .0306868     8.93   0.000     .2138407    .3341308\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\nidcode: Unstructured         |\n                 var(tenure) |   .0007758   .0000666      .0006556    .0009181\n                  var(union) |   .0514475   .0041886      .0438594    .0603483\n           cov(tenure,union) |   .0016667   .0004909      .0007044    .0026289\n-----------------------------+------------------------------------------------\nidcode: Unstructured         |\n                   var(race) |   .0202217   .0139137      .0052498    .0778921\n                  var(_cons) |   .1578058    .031278      .1070066    .2327211\n             cov(race,_cons) |  -.0401861    .022046     -.0833954    .0030232\n-----------------------------+------------------------------------------------\n               var(Residual) |   .0583641   .0007602      .0568929    .0598732\n------------------------------------------------------------------------------\nLR test vs. linear model: chi2(6) = 10154.21              Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n       _nl_1: tanh([atr1_1_1_2]_cons)*exp([lns1_1_1]_cons + [lns1_1_2]_cons)/ex\n&gt; p(2*[lns1_1_2]_cons)\n\n------------------------------------------------------------------------------\n     ln_wage | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       _nl_1 |   .0323954   .0101649     3.19   0.001     .0124725    .0523182\n------------------------------------------------------------------------------\n\n       _nl_1: tanh([atr1_2_1_2]_cons)*exp([lns1_2_1]_cons + [lns1_2_2]_cons)/ex\n&gt; p(2*[lns1_2_2]_cons)\n\n------------------------------------------------------------------------------\n     ln_wage | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       _nl_1 |  -.2546555    .090066    -2.83   0.005    -.4311817   -.0781294\n------------------------------------------------------------------------------\n\n\n\nmixed ln_w grade age || idcode: tenure union, cov(uns) || idcode: race, ///\n    cov(uns)\nreffadjust4nlcom tenure union, eqn(idcode) sub(1)\nnlcom `r(beta_union)'\nreffadjust4nlcom race _cons, eqn(idcode) sub(2)\nnlcom `r(beta__cons)'\n\n\nPerforming EM optimization ...\n\nPerforming gradient-based optimization: \nIteration 0:  Log likelihood = -5208.9293  \nIteration 1:  Log likelihood = -5199.2605  (not concave)\nIteration 2:  Log likelihood =   -5175.53  (not concave)\nIteration 3:  Log likelihood = -5173.8245  \nIteration 4:  Log likelihood = -5171.2707  \nIteration 5:  Log likelihood = -5171.0525  \nIteration 6:  Log likelihood = -5171.0492  \nIteration 7:  Log likelihood = -5171.0492  \n\nComputing standard errors ...\n\nMixed-effects ML regression                         Number of obs    =  19,008\nGroup variable: idcode                              Number of groups =   4,132\n                                                    Obs per group:\n                                                                 min =       1\n                                                                 avg =     4.6\n                                                                 max =      12\n                                                    Wald chi2(2)     = 2164.18\nLog likelihood = -5171.0492                         Prob &gt; chi2      =  0.0000\n\n------------------------------------------------------------------------------\n     ln_wage | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       grade |    .083625   .0022067    37.90   0.000        .0793      .08795\n         age |   .0104518   .0004215    24.80   0.000     .0096256    .0112779\n       _cons |   .2739857   .0306868     8.93   0.000     .2138407    .3341307\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\nidcode: Unstructured         |\n                 var(tenure) |   .0007758   .0000666      .0006556    .0009181\n                  var(union) |   .0514475   .0041886      .0438595    .0603483\n           cov(tenure,union) |   .0016667   .0004909      .0007044    .0026289\n-----------------------------+------------------------------------------------\nidcode: Unstructured         |\n                   var(race) |   .0202217   .0139134      .0052499      .07789\n                  var(_cons) |   .1578059   .0312773      .1070075    .2327191\n             cov(race,_cons) |  -.0401862   .0220455     -.0833945    .0030222\n-----------------------------+------------------------------------------------\n               var(Residual) |   .0583641   .0007602      .0568929    .0598732\n------------------------------------------------------------------------------\nLR test vs. linear model: chi2(6) = 10154.21              Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n       _nl_1: tanh([atr1_1_1_2]_cons)*exp([lns1_1_1]_cons + [lns1_1_2]_cons)/ex\n&gt; p(2*[lns1_1_2]_cons)\n\n------------------------------------------------------------------------------\n     ln_wage | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       _nl_1 |   .0323953   .0101649     3.19   0.001     .0124726    .0523181\n------------------------------------------------------------------------------\n\n       _nl_1: tanh([atr1_2_1_2]_cons)*exp([lns1_2_1]_cons + [lns1_2_2]_cons)/ex\n&gt; p(2*[lns1_2_2]_cons)\n\n------------------------------------------------------------------------------\n     ln_wage | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       _nl_1 |  -.2546557   .0900641    -2.83   0.005     -.431178   -.0781333\n------------------------------------------------------------------------------"
  },
  {
    "objectID": "reffadjustsim-examples.html",
    "href": "reffadjustsim-examples.html",
    "title": "reffadjustsim helpfile examples",
    "section": "",
    "text": "Examples 1 & 2 assume the path to the MLwiN executable is set in global MLwiN_path; see help runmlwin"
  },
  {
    "objectID": "reffadjustsim-examples.html#example-1-two-level-continuous-response-model",
    "href": "reffadjustsim-examples.html#example-1-two-level-continuous-response-model",
    "title": "reffadjustsim helpfile examples",
    "section": "Example 1: Two level continuous response model",
    "text": "Example 1: Two level continuous response model\n(see page 59 of the MLwiN User Manual)\n\nread in data\n\n\nuse https://www.bristol.ac.uk/cmm/media/runmlwin/tutorial, clear\n\n\nfit model using MLwiN via runmlwin\n\n\nrunmlwin normexam cons standlrt, level1(student: cons) ///\n    level2(school: cons standlrt) batch\n\n \n --- Begin MLwiN error log --- \nMLN - Software for N-level analysis.   Sat 25 Oct 2025 22:35:05\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77659.000003\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77659.000007\n --- End MLwiN error log --- \n\nWarning: getversion plugin could not be loaded\nMLwiN 3.16 multilevel model                     Number of obs      =      4059\nNormal response model (hierarchical)\nEstimation algorithm: IGLS\n\n-----------------------------------------------------------\n                |   No. of       Observations per Group\n Level Variable |   Groups    Minimum    Average    Maximum\n----------------+------------------------------------------\n         school |       65          2       62.4        198\n-----------------------------------------------------------\n\nRun time (seconds)   =       0.07\nNumber of iterations =          4\nLog likelihood       =  -4658.435\nDeviance             =    9316.87\n------------------------------------------------------------------------------\n    normexam |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n        cons |  -.0115051    .039783   -0.29    0.772    -.0894783     .066468\n    standlrt |   .5567305    .019937   27.92    0.000     .5176547    .5958062\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n   Random-effects Parameters |   Estimate   Std. Err.     [95% Conf. Interval]\n-----------------------------+------------------------------------------------\nLevel 2: school              |\n                   var(cons) |   .0904446    .017924      .0553142    .1255749\n          cov(cons,standlrt) |   .0180414   .0067229      .0048649     .031218\n               var(standlrt) |   .0145361   .0044139      .0058851    .0231872\n-----------------------------+------------------------------------------------\nLevel 1: student             |\n                   var(cons) |   .5536575   .0124818      .5291937    .5781214\n------------------------------------------------------------------------------\n\n\n/nogui option ignored\nECHO 0\n\nExecution completed\n\n\n\nreport coefficient as median with 2.5 & 97.5 percentiles\n\n\nreffadjustsim cons standlrt, eqn(RP2) seed(12345)\n\n\n------------------------------------------------------------------------------\n        cons |     Median              2.5 Percentile      97.5 Percentile\n-------------+----------------------------------------------------------------\n    standlrt |   1.242541                 .4311653            2.607229\n------------------------------------------------------------------------------\n\n\n\nreport coefficient as mean & Wald-type confidence interval\nWarning: mean and Wald-type confidence are inaccurate in this example\n\n\nreffadjustsim cons standlrt, eqn(RP2) seed(12345) waldtype\n\n\n------------------------------------------------------------------------------\n        cons |      Coef.   Std. Err.                     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n    standlrt |   1.319134    1.22225                     -1.076431      3.7147\n------------------------------------------------------------------------------\nWarning: Coef. & Wald-type conf. interval limits may be inaccurate.\nPlease compare with default output which reports median & centiles.\n\n\n\ncompare with delta-method confidence interval (first refit model)\n\n\nrunmlwin normexam cons standlrt, level1(student: cons) ///\n    level2(school: cons standlrt) batch\nreffadjust4nlcom cons standlrt, eqn(RP2)\nnlcom `r(beta_standlrt)'\n\n \n --- Begin MLwiN error log --- \nMLN - Software for N-level analysis.   Sat 25 Oct 2025 22:35:05\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77659.000004\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77659.000008\n --- End MLwiN error log --- \n\nWarning: getversion plugin could not be loaded\nMLwiN 3.16 multilevel model                     Number of obs      =      4059\nNormal response model (hierarchical)\nEstimation algorithm: IGLS\n\n-----------------------------------------------------------\n                |   No. of       Observations per Group\n Level Variable |   Groups    Minimum    Average    Maximum\n----------------+------------------------------------------\n         school |       65          2       62.4        198\n-----------------------------------------------------------\n\nRun time (seconds)   =       0.04\nNumber of iterations =          4\nLog likelihood       =  -4658.435\nDeviance             =    9316.87\n------------------------------------------------------------------------------\n    normexam |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n        cons |  -.0115051    .039783   -0.29    0.772    -.0894783     .066468\n    standlrt |   .5567305    .019937   27.92    0.000     .5176547    .5958062\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n   Random-effects Parameters |   Estimate   Std. Err.     [95% Conf. Interval]\n-----------------------------+------------------------------------------------\nLevel 2: school              |\n                   var(cons) |   .0904446    .017924      .0553142    .1255749\n          cov(cons,standlrt) |   .0180414   .0067229      .0048649     .031218\n               var(standlrt) |   .0145361   .0044139      .0058851    .0231872\n-----------------------------+------------------------------------------------\nLevel 1: student             |\n                   var(cons) |   .5536575   .0124818      .5291937    .5781214\n------------------------------------------------------------------------------\n\n       _nl_1: [RP2]cov(cons\\standlrt)/[RP2]var(standlrt)\n\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       _nl_1 |   1.241144   .4275471     2.90   0.004     .4031675    2.079121\n------------------------------------------------------------------------------\n\n\n/nogui option ignored\nECHO 0\n\nExecution completed\n\n\n\ncompare with Bayesian posterior distribution\n\n\nrunmlwin normexam cons standlrt, level1(student: cons) ///\n    level2(school: cons standlrt) batch mcmc(on) initsprevious seed(121211)\nmcmcsum, getchains\nreffadjustsim cons standlrt, eqn(RP2) mcmcsum\n\n \n\n\n/nogui option ignored\nECHO 0\n\nBURNING IN...\nBurning in for 50 iterations out of 500\nBurning in for 100 iterations out of 500\nBurning in for 150 iterations out of 500\nBurning in for 200 iterations out of 500\nBurning in for 250 iterations out of 500\nBurning in for 300 iterations out of 500\nBurning in for 350 iterations out of 500\nBurning in for 400 iterations out of 500\nBurning in for 450 iterations out of 500\nBurning in for 500 iterations out of 500\n\nActual update 50 of 5000, Stored update 50 of 5000\nActual update 100 of 5000, Stored update 100 of 5000\nActual update 150 of 5000, Stored update 150 of 5000\nActual update 200 of 5000, Stored update 200 of 5000\nActual update 250 of 5000, Stored update 250 of 5000\nActual update 300 of 5000, Stored update 300 of 5000\nActual update 350 of 5000, Stored update 350 of 5000\nActual update 400 of 5000, Stored update 400 of 5000\nActual update 450 of 5000, Stored update 450 of 5000\nActual update 500 of 5000, Stored update 500 of 5000\nActual update 550 of 5000, Stored update 550 of 5000\nActual update 600 of 5000, Stored update 600 of 5000\nActual update 650 of 5000, Stored update 650 of 5000\nActual update 700 of 5000, Stored update 700 of 5000\nActual update 750 of 5000, Stored update 750 of 5000\nActual update 800 of 5000, Stored update 800 of 5000\nActual update 850 of 5000, Stored update 850 of 5000\nActual update 900 of 5000, Stored update 900 of 5000\nActual update 950 of 5000, Stored update 950 of 5000\nActual update 1000 of 5000, Stored update 1000 of 5000\nActual update 1050 of 5000, Stored update 1050 of 5000\nActual update 1100 of 5000, Stored update 1100 of 5000\nActual update 1150 of 5000, Stored update 1150 of 5000\nActual update 1200 of 5000, Stored update 1200 of 5000\nActual update 1250 of 5000, Stored update 1250 of 5000\nActual update 1300 of 5000, Stored update 1300 of 5000\nActual update 1350 of 5000, Stored update 1350 of 5000\nActual update 1400 of 5000, Stored update 1400 of 5000\nActual update 1450 of 5000, Stored update 1450 of 5000\nActual update 1500 of 5000, Stored update 1500 of 5000\nActual update 1550 of 5000, Stored update 1550 of 5000\nActual update 1600 of 5000, Stored update 1600 of 5000\nActual update 1650 of 5000, Stored update 1650 of 5000\nActual update 1700 of 5000, Stored update 1700 of 5000\nActual update 1750 of 5000, Stored update 1750 of 5000\nActual update 1800 of 5000, Stored update 1800 of 5000\nActual update 1850 of 5000, Stored update 1850 of 5000\nActual update 1900 of 5000, Stored update 1900 of 5000\nActual update 1950 of 5000, Stored update 1950 of 5000\nActual update 2000 of 5000, Stored update 2000 of 5000\nActual update 2050 of 5000, Stored update 2050 of 5000\nActual update 2100 of 5000, Stored update 2100 of 5000\nActual update 2150 of 5000, Stored update 2150 of 5000\nActual update 2200 of 5000, Stored update 2200 of 5000\nActual update 2250 of 5000, Stored update 2250 of 5000\nActual update 2300 of 5000, Stored update 2300 of 5000\nActual update 2350 of 5000, Stored update 2350 of 5000\nActual update 2400 of 5000, Stored update 2400 of 5000\nActual update 2450 of 5000, Stored update 2450 of 5000\nActual update 2500 of 5000, Stored update 2500 of 5000\nActual update 2550 of 5000, Stored update 2550 of 5000\nActual update 2600 of 5000, Stored update 2600 of 5000\nActual update 2650 of 5000, Stored update 2650 of 5000\nActual update 2700 of 5000, Stored update 2700 of 5000\nActual update 2750 of 5000, Stored update 2750 of 5000\nActual update 2800 of 5000, Stored update 2800 of 5000\nActual update 2850 of 5000, Stored update 2850 of 5000\nActual update 2900 of 5000, Stored update 2900 of 5000\nActual update 2950 of 5000, Stored update 2950 of 5000\nActual update 3000 of 5000, Stored update 3000 of 5000\nActual update 3050 of 5000, Stored update 3050 of 5000\nActual update 3100 of 5000, Stored update 3100 of 5000\nActual update 3150 of 5000, Stored update 3150 of 5000\nActual update 3200 of 5000, Stored update 3200 of 5000\nActual update 3250 of 5000, Stored update 3250 of 5000\nActual update 3300 of 5000, Stored update 3300 of 5000\nActual update 3350 of 5000, Stored update 3350 of 5000\nActual update 3400 of 5000, Stored update 3400 of 5000\nActual update 3450 of 5000, Stored update 3450 of 5000\nActual update 3500 of 5000, Stored update 3500 of 5000\nActual update 3550 of 5000, Stored update 3550 of 5000\nActual update 3600 of 5000, Stored update 3600 of 5000\nActual update 3650 of 5000, Stored update 3650 of 5000\nActual update 3700 of 5000, Stored update 3700 of 5000\nActual update 3750 of 5000, Stored update 3750 of 5000\nActual update 3800 of 5000, Stored update 3800 of 5000\nActual update 3850 of 5000, Stored update 3850 of 5000\nActual update 3900 of 5000, Stored update 3900 of 5000\nActual update 3950 of 5000, Stored update 3950 of 5000\nActual update 4000 of 5000, Stored update 4000 of 5000\nActual update 4050 of 5000, Stored update 4050 of 5000\nActual update 4100 of 5000, Stored update 4100 of 5000\nActual update 4150 of 5000, Stored update 4150 of 5000\nActual update 4200 of 5000, Stored update 4200 of 5000\nActual update 4250 of 5000, Stored update 4250 of 5000\nActual update 4300 of 5000, Stored update 4300 of 5000\nActual update 4350 of 5000, Stored update 4350 of 5000\nActual update 4400 of 5000, Stored update 4400 of 5000\nActual update 4450 of 5000, Stored update 4450 of 5000\n\n\n --- Begin MLwiN error log --- \nMLN - Software for N-level analysis.   Sat 25 Oct 2025 22:35:05\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77659.000006\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77659.00000a\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77659.000004\n --- End MLwiN error log --- \n\n\n\nActual update 4500 of 5000, Stored update 4500 of 5000\nActual update 4550 of 5000, Stored update 4550 of 5000\nActual update 4600 of 5000, Stored update 4600 of 5000\nActual update 4650 of 5000, Stored update 4650 of 5000\nActual update 4700 of 5000, Stored update 4700 of 5000\nActual update 4750 of 5000, Stored update 4750 of 5000\nActual update 4800 of 5000, Stored update 4800 of 5000\nActual update 4850 of 5000, Stored update 4850 of 5000\nActual update 4900 of 5000, Stored update 4900 of 5000\nActual update 4950 of 5000, Stored update 4950 of 5000\nActual update 5000 of 5000, Stored update 5000 of 5000\nExecution completed\n\n\nWarning: getversion plugin could not be loaded\nMLwiN 3.16 multilevel model                     Number of obs      =      4059\nNormal response model (hierarchical)\nEstimation algorithm: MCMC\n\n-----------------------------------------------------------\n                |   No. of       Observations per Group\n Level Variable |   Groups    Minimum    Average    Maximum\n----------------+------------------------------------------\n         school |       65          2       62.4        198\n-----------------------------------------------------------\n\nBurnin                     =        500\nChain                      =       5000\nThinning                   =          1\nRun time (seconds)         =       .605\nDeviance (dbar)            =    9122.42\nDeviance (thetabar)        =    9031.09\nEffective no. of pars (pd) =      91.34\nBayesian DIC               =    9213.76\n------------------------------------------------------------------------------\n    normexam |      Mean    Std. Dev.     ESS     P       [95% Cred. Interval]\n-------------+----------------------------------------------------------------\n        cons |   -.010594    .040224      189   0.395    -.0908355    .0678323\n    standlrt |   .5568075   .0200344      839   0.000     .5167302    .5960792\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n   Random-effects Parameters |     Mean   Std. Dev.   ESS     [95% Cred. Int]\n-----------------------------+------------------------------------------------\nLevel 2: school              |\n                   var(cons) |  .0961163  .0199991   2715   .0644542  .1421674\n          cov(cons,standlrt) |  .0190683  .0072205   1713   .0065699   .034989\n               var(standlrt) |  .0153485  .0046893    978   .0078805  .0261361\n-----------------------------+------------------------------------------------\nLevel 1: student             |\n                   var(cons) |  .5542075  .0123209   4645   .5309043   .578929\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n        cons |     Median              2.5 Percentile      97.5 Percentile\n-------------+----------------------------------------------------------------\n    standlrt |   1.266334                 .4572121            2.281147\n------------------------------------------------------------------------------"
  },
  {
    "objectID": "reffadjustsim-examples.html#example-2-multivariate-response-model",
    "href": "reffadjustsim-examples.html#example-2-multivariate-response-model",
    "title": "reffadjustsim helpfile examples",
    "section": "Example 2: Multivariate response model",
    "text": "Example 2: Multivariate response model\n(see page 214 of the MLwiN User Manual)\n\nread in data\n\n\nuse https://www.bristol.ac.uk/cmm/media/runmlwin/gcsemv1, clear\n\n\nfit model using MLwiN via runmlwin\n\n\nrunmlwin (written cons female, eq(1)) (csework cons female, eq(2)), ///\n        level1(student: (cons, eq(1)) (cons, eq(2))) ///\n        level2(school: (cons, eq(1)) (cons, eq(2))) ///\n        batch\n\n \n --- Begin MLwiN error log --- \nMLN - Software for N-level analysis.   Sat 25 Oct 2025 22:35:06\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77659.000005\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77659.000009\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77659.00000a\n --- End MLwiN error log --- \n\nWarning: getversion plugin could not be loaded\nMLwiN 3.16 multilevel model                     Number of obs      =      1905\nMultivariate response model (hierarchical)\nEstimation algorithm: IGLS\n\n-----------------------------------------------------------\n                |   No. of       Observations per Group\n Level Variable |   Groups    Minimum    Average    Maximum\n----------------+------------------------------------------\n         school |       73          2       26.1        104\n-----------------------------------------------------------\n\nRun time (seconds)   =       0.10\nNumber of iterations =          4\nLog likelihood       = -13400.244\nDeviance             =  26800.488\n------------------------------------------------------------------------------\n             |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\nwritten      |\n      cons_1 |   49.45213   .9338433   52.96    0.000     47.62183    51.28243\n    female_1 |   -2.50295   .5607219   -4.46    0.000    -3.601945   -1.403955\n-------------+----------------------------------------------------------------\ncsework      |\n      cons_2 |   69.67166   1.171786   59.46    0.000       67.375    71.96831\n    female_2 |   6.751393   .6706493   10.07    0.000     5.436944    8.065841\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n   Random-effects Parameters |   Estimate   Std. Err.     [95% Conf. Interval]\n-----------------------------+------------------------------------------------\nLevel 2: school              |\n                 var(cons_1) |   46.81298    9.18733      28.80615    64.81982\n          cov(cons_1,cons_2) |   24.87783   8.880358       7.47265    42.28301\n                 var(cons_2) |   75.16623   14.56485      46.61965    103.7128\n-----------------------------+------------------------------------------------\nLevel 1: student             |\n                 var(cons_1) |   124.6343   4.349834      116.1088    133.1598\n          cov(cons_1,cons_2) |   73.00323    4.17829      64.81393    81.19252\n                 var(cons_2) |   180.0982   6.245801      167.8566    192.3397\n------------------------------------------------------------------------------\n\n\n/nogui option ignored\nECHO 0\n\nExecution completed\n\n\n\nreport coefficient as median with 2.5 and 97.5 percentiles\n\n\nreffadjustsim cons_1 cons_2, eqn(RP2) seed(12345)\n\n\n------------------------------------------------------------------------------\n      cons_1 |     Median              2.5 Percentile      97.5 Percentile\n-------------+----------------------------------------------------------------\n      cons_2 |   .3308853                 .1231026            .5395364\n------------------------------------------------------------------------------\n\n\n\nreport coefficient as mean with Wald-type confidence interval\n\n\nreffadjustsim cons_1 cons_2, eqn(RP2) seed(12345) waldtype\n\n\n------------------------------------------------------------------------------\n      cons_1 |      Coef.   Std. Err.                     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\n      cons_2 |    .330939   .1065639                      .1220777    .5398003\n------------------------------------------------------------------------------\nWarning: Coef. & Wald-type conf. interval limits may be inaccurate.\nPlease compare with default output which reports median & centiles.\n\n\n\ncompare with delta-method confidence interval (first refit model)\n\n\nrunmlwin (written cons female, eq(1)) (csework cons female, eq(2)), ///\n        level1(student: (cons, eq(1)) (cons, eq(2))) ///\n        level2(school: (cons, eq(1)) (cons, eq(2))) ///\n        batch\nreffadjust4nlcom cons_1 cons_2, eqn(RP2)\nnlcom `r(beta_cons_2)'\n\n \n --- Begin MLwiN error log --- \nMLN - Software for N-level analysis.   Sat 25 Oct 2025 22:35:06\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77659.000006\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77659.00000a\n\n/var/folders/9j/bw4vdrw94yndry3z9cv8ms1m0000gn/T//St77659.00000b\n --- End MLwiN error log --- \n\nWarning: getversion plugin could not be loaded\nMLwiN 3.16 multilevel model                     Number of obs      =      1905\nMultivariate response model (hierarchical)\nEstimation algorithm: IGLS\n\n-----------------------------------------------------------\n                |   No. of       Observations per Group\n Level Variable |   Groups    Minimum    Average    Maximum\n----------------+------------------------------------------\n         school |       73          2       26.1        104\n-----------------------------------------------------------\n\nRun time (seconds)   =       0.10\nNumber of iterations =          4\nLog likelihood       = -13400.244\nDeviance             =  26800.488\n------------------------------------------------------------------------------\n             |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]\n-------------+----------------------------------------------------------------\nwritten      |\n      cons_1 |   49.45213   .9338433   52.96    0.000     47.62183    51.28243\n    female_1 |   -2.50295   .5607219   -4.46    0.000    -3.601945   -1.403955\n-------------+----------------------------------------------------------------\ncsework      |\n      cons_2 |   69.67166   1.171786   59.46    0.000       67.375    71.96831\n    female_2 |   6.751393   .6706493   10.07    0.000     5.436944    8.065841\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n   Random-effects Parameters |   Estimate   Std. Err.     [95% Conf. Interval]\n-----------------------------+------------------------------------------------\nLevel 2: school              |\n                 var(cons_1) |   46.81298    9.18733      28.80615    64.81982\n          cov(cons_1,cons_2) |   24.87783   8.880358       7.47265    42.28301\n                 var(cons_2) |   75.16623   14.56485      46.61965    103.7128\n-----------------------------+------------------------------------------------\nLevel 1: student             |\n                 var(cons_1) |   124.6343   4.349834      116.1088    133.1598\n          cov(cons_1,cons_2) |   73.00323    4.17829      64.81393    81.19252\n                 var(cons_2) |   180.0982   6.245801      167.8566    192.3397\n------------------------------------------------------------------------------\n\n       _nl_1: [RP2]cov(cons_1\\cons_2)/[RP2]var(cons_2)\n\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       _nl_1 |   .3309709   .0986417     3.36   0.001     .1376367    .5243051\n------------------------------------------------------------------------------\n\n\n/nogui option ignored\nECHO 0\n\nExecution completed\n\n\n\ncompare with Bayesian posterior distribution\n\nrunmlwin (written cons female, eq(1)) (csework cons female, eq(2)), /// level1(student: (cons, eq(1)) (cons, eq(2))) /// level2(school: (cons, eq(1)) (cons, eq(2))) /// batch mcmc(on) initsprevious seed(121211) mcmcsum, getchains reffadjustsim cons_1 cons_2, eqn(RP2) mcmcsum\n\n## Example 3: based on xtmixed helpfile\n\n::: {#93f34de6 .cell execution_count=13}\n``` {.stata .cell-code}\nwebuse nlswork, clear\nversion 12: xtmixed ln_w grade age c.age#c.age ttl_exp tenure c.tenure#c.tenure || ///\n    idcode: tenure, cov(uns) var\nversion 12: reffadjustsim _cons tenure, eqn(idcode) seed(12345)\n\n(National Longitudinal Survey of Young Women, 14-24 years old in 1968)\n\nPerforming EM optimization: \n\nPerforming gradient-based optimization: \n\nIteration 0:  Log likelihood = -8985.3816  \nIteration 1:  Log likelihood = -8966.2878  \nIteration 2:  Log likelihood =  -8965.819  \nIteration 3:  Log likelihood =  -8965.819  \n\nComputing standard errors:\n\nMixed-effects ML regression                         Number of obs    =  28,099\nGroup variable: idcode                              Number of groups =   4,697\n                                                    Obs per group:\n                                                                 min =       1\n                                                                 avg =     6.0\n                                                                 max =      15\n                                                    Wald chi2(6)     = 6767.13\nLog likelihood =  -8965.819                         Prob &gt; chi2      =  0.0000\n\n------------------------------------------------------------------------------\n     ln_wage | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       grade |   .0690318   .0017885    38.60   0.000     .0655264    .0725372\n         age |   .0321872   .0027908    11.53   0.000     .0267174     .037657\n             |\n c.age#c.age |  -.0006574   .0000466   -14.09   0.000    -.0007488    -.000566\n             |\n     ttl_exp |   .0350762   .0011352    30.90   0.000     .0328513     .037301\n      tenure |   .0393576   .0017198    22.88   0.000     .0359868    .0427284\n             |\n    c.tenure#|\n    c.tenure |  -.0019926   .0001232   -16.18   0.000    -.0022341   -.0017512\n             |\n       _cons |    .162264    .044888     3.61   0.000     .0742851    .2502429\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\nidcode: Unstructured         |\n                 var(tenure) |   .0005174   .0000566      .0004176    .0006411\n                  var(_cons) |   .0632497   .0020808      .0593001    .0674624\n           cov(tenure,_cons) |   .0007165   .0002809      .0001658    .0012671\n-----------------------------+------------------------------------------------\n               var(Residual) |   .0815016   .0007978      .0799529    .0830803\n------------------------------------------------------------------------------\nLR test vs. linear model: chi2(3) = 9168.36               Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n------------------------------------------------------------------------------\n       _cons |     Median              2.5 Percentile      97.5 Percentile\n-------------+----------------------------------------------------------------\n      tenure |   1.377053                 .2240176            2.619103\n------------------------------------------------------------------------------\n\n:::\n\nmixed ln_w grade age c.age#c.age ttl_exp tenure c.tenure#c.tenure || ///\n    idcode: tenure, cov(uns)\nreffadjustsim _cons tenure, eqn(idcode) seed(12345)\n\n\nPerforming EM optimization ...\n\nPerforming gradient-based optimization: \nIteration 0:  Log likelihood = -8985.3816  \nIteration 1:  Log likelihood = -8966.3961  \nIteration 2:  Log likelihood =  -8965.819  \nIteration 3:  Log likelihood =  -8965.819  \n\nComputing standard errors ...\n\nMixed-effects ML regression                         Number of obs    =  28,099\nGroup variable: idcode                              Number of groups =   4,697\n                                                    Obs per group:\n                                                                 min =       1\n                                                                 avg =     6.0\n                                                                 max =      15\n                                                    Wald chi2(6)     = 6767.13\nLog likelihood =  -8965.819                         Prob &gt; chi2      =  0.0000\n\n------------------------------------------------------------------------------\n     ln_wage | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       grade |   .0690318   .0017885    38.60   0.000     .0655264    .0725372\n         age |   .0321872   .0027908    11.53   0.000     .0267174     .037657\n             |\n c.age#c.age |  -.0006574   .0000466   -14.09   0.000    -.0007488    -.000566\n             |\n     ttl_exp |   .0350762   .0011352    30.90   0.000     .0328513     .037301\n      tenure |   .0393576   .0017198    22.88   0.000     .0359868    .0427284\n             |\n    c.tenure#|\n    c.tenure |  -.0019926   .0001232   -16.18   0.000    -.0022341   -.0017512\n             |\n       _cons |    .162264    .044888     3.61   0.000     .0742851    .2502429\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\nidcode: Unstructured         |\n                 var(tenure) |   .0005174   .0000566      .0004176    .0006411\n                  var(_cons) |   .0632497   .0020808      .0593001    .0674624\n           cov(tenure,_cons) |   .0007165   .0002809      .0001658    .0012671\n-----------------------------+------------------------------------------------\n               var(Residual) |   .0815016   .0007978      .0799529    .0830803\n------------------------------------------------------------------------------\nLR test vs. linear model: chi2(3) = 9168.36               Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n------------------------------------------------------------------------------\n       _cons |     Median              2.5 Percentile      97.5 Percentile\n-------------+----------------------------------------------------------------\n      tenure |   1.377053                  .224019            2.619103\n------------------------------------------------------------------------------"
  },
  {
    "objectID": "reffadjustsim-examples.html#example-4-based-on-xtmelogit-helpfile",
    "href": "reffadjustsim-examples.html#example-4-based-on-xtmelogit-helpfile",
    "title": "reffadjustsim helpfile examples",
    "section": "Example 4: based on xtmelogit helpfile",
    "text": "Example 4: based on xtmelogit helpfile\n\nwebuse bangladesh, clear\nversion 12: xtmelogit c_use urban age child* || district: urban , ///\n    cov(uns) var\nversion 12: reffadjustsim _cons urban, eqn(district) seed(12345)\n\n(Bangladesh Fertility Survey, 1989)\nnote: children omitted because of collinearity.\n\nRefining starting values: \n\nIteration 0:  Log likelihood = -1215.8594  (not concave)\nIteration 1:  Log likelihood = -1204.0802  \nIteration 2:  Log likelihood = -1199.7968  \n\nPerforming gradient-based optimization: \n\nIteration 0:  Log likelihood = -1199.7968  \nIteration 1:  Log likelihood = -1199.4726  \nIteration 2:  Log likelihood = -1199.3158  \nIteration 3:  Log likelihood =  -1199.315  \nIteration 4:  Log likelihood =  -1199.315  \n\nMixed-effects logistic regression               Number of obs     =      1,934\nGroup variable: district                        Number of groups  =         60\n\n                                                Obs per group:\n                                                              min =          2\n                                                              avg =       32.2\n                                                              max =        118\n\nIntegration points =   7                        Wald chi2(5)      =      97.50\nLog likelihood =  -1199.315                     Prob &gt; chi2       =     0.0000\n\n------------------------------------------------------------------------------\n       c_use | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       urban |   .8157872   .1715519     4.76   0.000     .4795516    1.152023\n         age |   -.026415    .008023    -3.29   0.001    -.0421398   -.0106902\n      child1 |    1.13252   .1603285     7.06   0.000      .818282    1.446758\n      child2 |   1.357739   .1770522     7.67   0.000     1.010724    1.704755\n      child3 |   1.353827   .1828801     7.40   0.000     .9953882    1.712265\n    children |          0  (omitted)\n       _cons |   -1.71165   .1605617   -10.66   0.000    -2.026345   -1.396954\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\ndistrict: Unstructured       |\n                  var(urban) |   .6663221   .3224714      .2580709      1.7204\n                  var(_cons) |   .3897434   .1292458      .2034723    .7465387\n            cov(urban,_cons) |  -.4058846   .1755418     -.7499402   -.0618289\n------------------------------------------------------------------------------\nLR test vs. logistic model: chi2(3) = 58.42               Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n------------------------------------------------------------------------------\n       _cons |     Median              2.5 Percentile      97.5 Percentile\n-------------+----------------------------------------------------------------\n       urban |  -.5931825                -.9623632           -.2892334\n------------------------------------------------------------------------------\n\n\n\nwebuse bangladesh, clear\nmeqrlogit c_use urban age child* || district: urban, cov(uns)\nreffadjustsim _cons urban, eqn(district) seed(12345)\n\n(Bangladesh Fertility Survey, 1989)\nnote: children omitted because of collinearity.\n\nRefining starting values: \n\nIteration 0:  Log likelihood = -1215.8594  (not concave)\nIteration 1:  Log likelihood = -1204.0802  \nIteration 2:  Log likelihood = -1199.7968  \n\nPerforming gradient-based optimization: \n\nIteration 0:  Log likelihood = -1199.7968  \nIteration 1:  Log likelihood = -1199.4726  \nIteration 2:  Log likelihood = -1199.3158  \nIteration 3:  Log likelihood =  -1199.315  \nIteration 4:  Log likelihood =  -1199.315  \n\nMixed-effects logistic regression               Number of obs     =      1,934\nGroup variable: district                        Number of groups  =         60\n\n                                                Obs per group:\n                                                              min =          2\n                                                              avg =       32.2\n                                                              max =        118\n\nIntegration points =   7                        Wald chi2(5)      =      97.50\nLog likelihood =  -1199.315                     Prob &gt; chi2       =     0.0000\n\n------------------------------------------------------------------------------\n       c_use | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       urban |   .8157872   .1715519     4.76   0.000     .4795516    1.152023\n         age |   -.026415    .008023    -3.29   0.001    -.0421398   -.0106902\n      child1 |    1.13252   .1603285     7.06   0.000      .818282    1.446758\n      child2 |   1.357739   .1770522     7.67   0.000     1.010724    1.704755\n      child3 |   1.353827   .1828801     7.40   0.000     .9953882    1.712265\n    children |          0  (omitted)\n       _cons |   -1.71165   .1605617   -10.66   0.000    -2.026345   -1.396954\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\ndistrict: Unstructured       |\n                  var(urban) |   .6663221   .3224714      .2580709      1.7204\n                  var(_cons) |   .3897434   .1292458      .2034723    .7465387\n            cov(urban,_cons) |  -.4058846   .1755418     -.7499402   -.0618289\n------------------------------------------------------------------------------\nLR test vs. logistic model: chi2(3) = 58.42               Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n------------------------------------------------------------------------------\n       _cons |     Median              2.5 Percentile      97.5 Percentile\n-------------+----------------------------------------------------------------\n       urban |  -.5931825                -.9623632           -.2892334\n------------------------------------------------------------------------------"
  },
  {
    "objectID": "reffadjustsim-examples.html#example-5-based-on-xtmepoisson-helpfile",
    "href": "reffadjustsim-examples.html#example-5-based-on-xtmepoisson-helpfile",
    "title": "reffadjustsim helpfile examples",
    "section": "Example 5: based on xtmepoisson helpfile",
    "text": "Example 5: based on xtmepoisson helpfile\n\nwebuse epilepsy, clear\nversion 12: xtmepoisson seizures treat lbas lbas_trt lage visit || ///\n        subject: visit, cov(uns) var intpoints(9)\nversion 12: reffadjustsim _cons visit, eqn(subject) seed(12345)\n\n(Epilepsy data; progabide drug treatment)\n\nRefining starting values: \n\nIteration 0:  Log likelihood = -672.17188  (not concave)\nIteration 1:  Log likelihood = -660.46056  \nIteration 2:  Log likelihood = -655.86888  \n\nPerforming gradient-based optimization: \n\nIteration 0:  Log likelihood = -655.86888  \nIteration 1:  Log likelihood = -655.68217  \nIteration 2:  Log likelihood = -655.68103  \nIteration 3:  Log likelihood = -655.68103  \n\nMixed-effects Poisson regression                Number of obs     =        236\nGroup variable: subject                         Number of groups  =         59\n\n                                                Obs per group:\n                                                              min =          4\n                                                              avg =        4.0\n                                                              max =          4\n\nIntegration points =   9                        Wald chi2(5)      =     115.56\nLog likelihood = -655.68103                     Prob &gt; chi2       =     0.0000\n\n------------------------------------------------------------------------------\n    seizures | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       treat |  -.9286588   .4021638    -2.31   0.021    -1.716885   -.1404323\n        lbas |   .8849767   .1312519     6.74   0.000     .6277277    1.142226\n    lbas_trt |   .3379757   .2044442     1.65   0.098    -.0627276     .738679\n        lage |   .4767192    .353622     1.35   0.178    -.2163672    1.169806\n       visit |  -.2664098   .1647096    -1.62   0.106    -.5892347    .0564151\n       _cons |   2.099555   .2203709     9.53   0.000     1.667636    2.531474\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\nsubject: Unstructured        |\n                  var(visit) |   .5314808   .2293851      .2280931    1.238406\n                  var(_cons) |   .2514928   .0587892      .1590552    .3976522\n            cov(visit,_cons) |   .0028715   .0887018     -.1709808    .1767238\n------------------------------------------------------------------------------\nLR test vs. Poisson model: chi2(3) = 324.54               Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n------------------------------------------------------------------------------\n       _cons |     Median              2.5 Percentile      97.5 Percentile\n-------------+----------------------------------------------------------------\n       visit |   .0044339                -.3128618            .3397986\n------------------------------------------------------------------------------\n\n\n\nmeqrpoisson seizures treat lbas lbas_trt lage visit || subject: visit, ///\n        cov(uns) intpoints(9)\nreffadjustsim _cons visit, eqn(subject) seed(12345)\n\n\nRefining starting values: \n\nIteration 0:  Log likelihood = -672.17188  (not concave)\nIteration 1:  Log likelihood = -660.46056  \nIteration 2:  Log likelihood = -655.86888  \n\nPerforming gradient-based optimization: \n\nIteration 0:  Log likelihood = -655.86888  \nIteration 1:  Log likelihood = -655.68217  \nIteration 2:  Log likelihood = -655.68103  \nIteration 3:  Log likelihood = -655.68103  \n\nMixed-effects Poisson regression                Number of obs     =        236\nGroup variable: subject                         Number of groups  =         59\n\n                                                Obs per group:\n                                                              min =          4\n                                                              avg =        4.0\n                                                              max =          4\n\nIntegration points =   9                        Wald chi2(5)      =     115.56\nLog likelihood = -655.68103                     Prob &gt; chi2       =     0.0000\n\n------------------------------------------------------------------------------\n    seizures | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       treat |  -.9286588   .4021638    -2.31   0.021    -1.716885   -.1404323\n        lbas |   .8849767   .1312519     6.74   0.000     .6277277    1.142226\n    lbas_trt |   .3379757   .2044442     1.65   0.098    -.0627276     .738679\n        lage |   .4767192    .353622     1.35   0.178    -.2163672    1.169806\n       visit |  -.2664098   .1647096    -1.62   0.106    -.5892347    .0564151\n       _cons |   2.099555   .2203709     9.53   0.000     1.667636    2.531474\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\nsubject: Unstructured        |\n                  var(visit) |   .5314808   .2293851      .2280931    1.238406\n                  var(_cons) |   .2514928   .0587892      .1590552    .3976522\n            cov(visit,_cons) |   .0028715   .0887018     -.1709808    .1767238\n------------------------------------------------------------------------------\nLR test vs. Poisson model: chi2(3) = 324.54               Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n------------------------------------------------------------------------------\n       _cons |     Median              2.5 Percentile      97.5 Percentile\n-------------+----------------------------------------------------------------\n       visit |   .0044339                -.3128618            .3397986\n------------------------------------------------------------------------------"
  },
  {
    "objectID": "reffadjustsim-examples.html#example-6-repeated-group-variable",
    "href": "reffadjustsim-examples.html#example-6-repeated-group-variable",
    "title": "reffadjustsim helpfile examples",
    "section": "Example 6: repeated group variable",
    "text": "Example 6: repeated group variable\n\nwebuse nlswork, clear\nversion 12: xtmixed ln_w grade age || idcode: tenure union, cov(uns) || ///\n    idcode: race, cov(uns) var\nversion 12: reffadjustsim tenure union, eqn(idcode) sub(1) seed(12345)\nversion 12: reffadjustsim race _cons, eqn(idcode) sub(2) seed(12345)\n\n(National Longitudinal Survey of Young Women, 14-24 years old in 1968)\n\nPerforming EM optimization: \n\nPerforming gradient-based optimization: \n\nIteration 0:  Log likelihood = -5208.9293  \nIteration 1:  Log likelihood = -5196.8989  (not concave)\nIteration 2:  Log likelihood = -5176.1013  \nIteration 3:  Log likelihood = -5174.4196  \nIteration 4:  Log likelihood = -5171.2001  \nIteration 5:  Log likelihood = -5171.0595  \nIteration 6:  Log likelihood = -5171.0493  \nIteration 7:  Log likelihood = -5171.0492  \n\nComputing standard errors:\n\nMixed-effects ML regression                         Number of obs    =  19,008\nGroup variable: idcode                              Number of groups =   4,132\n                                                    Obs per group:\n                                                                 min =       1\n                                                                 avg =     4.6\n                                                                 max =      12\n                                                    Wald chi2(2)     = 2164.18\nLog likelihood = -5171.0492                         Prob &gt; chi2      =  0.0000\n\n------------------------------------------------------------------------------\n     ln_wage | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       grade |    .083625   .0022067    37.90   0.000        .0793      .08795\n         age |   .0104518   .0004215    24.80   0.000     .0096256    .0112779\n       _cons |   .2739857   .0306868     8.93   0.000     .2138407    .3341308\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\nidcode: Unstructured         |\n                 var(tenure) |   .0007758   .0000666      .0006556    .0009181\n                  var(union) |   .0514475   .0041886      .0438594    .0603483\n           cov(tenure,union) |   .0016667   .0004909      .0007044    .0026289\n-----------------------------+------------------------------------------------\nidcode: Unstructured         |\n                   var(race) |   .0202217   .0139137      .0052498    .0778921\n                  var(_cons) |   .1578058    .031278      .1070066    .2327211\n             cov(race,_cons) |  -.0401861    .022046     -.0833954    .0030232\n-----------------------------+------------------------------------------------\n               var(Residual) |   .0583641   .0007602      .0568929    .0598732\n------------------------------------------------------------------------------\nLR test vs. linear model: chi2(6) = 10154.21              Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n------------------------------------------------------------------------------\n      tenure |     Median              2.5 Percentile      97.5 Percentile\n-------------+----------------------------------------------------------------\n       union |   .0321253                 .0121897            .0521846\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n        race |     Median              2.5 Percentile      97.5 Percentile\n-------------+----------------------------------------------------------------\n       _cons |  -.2544331                 -.476558           -.1166022\n------------------------------------------------------------------------------\n\n\n\nmixed ln_w grade age || idcode: tenure union, cov(uns) || idcode: race, ///\n    cov(uns)\nreffadjustsim tenure union, eqn(idcode) sub(1) seed(12345)\nreffadjustsim race _cons, eqn(idcode) sub(2) seed(12345)\n\n\nPerforming EM optimization ...\n\nPerforming gradient-based optimization: \nIteration 0:  Log likelihood = -5208.9293  \nIteration 1:  Log likelihood = -5199.2605  (not concave)\nIteration 2:  Log likelihood =   -5175.53  (not concave)\nIteration 3:  Log likelihood = -5173.8245  \nIteration 4:  Log likelihood = -5171.2707  \nIteration 5:  Log likelihood = -5171.0525  \nIteration 6:  Log likelihood = -5171.0492  \nIteration 7:  Log likelihood = -5171.0492  \n\nComputing standard errors ...\n\nMixed-effects ML regression                         Number of obs    =  19,008\nGroup variable: idcode                              Number of groups =   4,132\n                                                    Obs per group:\n                                                                 min =       1\n                                                                 avg =     4.6\n                                                                 max =      12\n                                                    Wald chi2(2)     = 2164.18\nLog likelihood = -5171.0492                         Prob &gt; chi2      =  0.0000\n\n------------------------------------------------------------------------------\n     ln_wage | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       grade |    .083625   .0022067    37.90   0.000        .0793      .08795\n         age |   .0104518   .0004215    24.80   0.000     .0096256    .0112779\n       _cons |   .2739857   .0306868     8.93   0.000     .2138407    .3341307\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\nidcode: Unstructured         |\n                 var(tenure) |   .0007758   .0000666      .0006556    .0009181\n                  var(union) |   .0514475   .0041886      .0438595    .0603483\n           cov(tenure,union) |   .0016667   .0004909      .0007044    .0026289\n-----------------------------+------------------------------------------------\nidcode: Unstructured         |\n                   var(race) |   .0202217   .0139134      .0052499      .07789\n                  var(_cons) |   .1578059   .0312773      .1070075    .2327191\n             cov(race,_cons) |  -.0401862   .0220455     -.0833945    .0030222\n-----------------------------+------------------------------------------------\n               var(Residual) |   .0583641   .0007602      .0568929    .0598732\n------------------------------------------------------------------------------\nLR test vs. linear model: chi2(6) = 10154.21              Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n------------------------------------------------------------------------------\n      tenure |     Median              2.5 Percentile      97.5 Percentile\n-------------+----------------------------------------------------------------\n       union |   .0321253                 .0121897            .0521846\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n        race |     Median              2.5 Percentile      97.5 Percentile\n-------------+----------------------------------------------------------------\n       _cons |  -.2544335                -.4765523           -.1166046\n------------------------------------------------------------------------------"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "reffadjust",
    "section": "",
    "text": "This is the website for the reffadjust Stata package.\nThe GitHub repository is here.\nIt is maintained by Tom Palmer."
  }
]